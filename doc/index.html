<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>"Master May I?"</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a title="Index" href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

      <div id="search">
  <a id="class_list_link" href="#">Namespace List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Master May I?</h1>
<h3>Clean, simple and flexible model based authorization designed to work with AuthLogic and InheritedResources.</h3>
<h3>If these docs looks all wanky, then be sure you&#8217;re viewing them on the rdoc.info site: http://rdoc.info/projects/tsaleh/master-may-i</h3>
<h2>Executive Summary</h2>
<p>
<tt><a title="Master May I" href="MasterMayI.html">Master May I</a></tt> adds query methods to all your models, which can
be used to determine who&#8217;s allowed to do what.
<tt><a title="Learn more." href="MasterMayI/ActiveRecordExtensions.html">Learn more.</a></tt>
</p>
<ul>
<li><tt><a title="<tt>Model.creatable_by?(user)</tt>" href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#creatable_by%3F-instance_method"><tt>Model.creatable_by?(user)</tt></a></tt> and
<tt><a title="<tt>Model.creatable?</tt>" href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#creatable%3F-instance_method"><tt>Model.creatable?</tt></a></tt>

</li>
<li><tt><a title="<tt>@model.readable_by?(user)</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#readable_by%3F-instance_method"><tt>@model.readable_by?(user)</tt></a></tt> and
<tt><a title="<tt>@model.readable?</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#readable%3F-instance_method"><tt>@model.readable?</tt></a></tt>

</li>
<li><tt><a title="<tt>@model.editable_by?(user)</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#editable_by%3F-instance_method"><tt>@model.editable_by?(user)</tt></a></tt> and
<tt><a title="<tt>@model.editable?</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#editable%3F-instance_method"><tt>@model.editable?</tt></a></tt>

</li>
<li><tt><a title="<tt>@model.destroyable_by?(user)</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#destroyable_by%3F-instance_method"><tt>@model.destroyable_by?(user)</tt></a></tt> and
<tt><a title="<tt>@model.destroyable?</tt>" href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#destroyable%3F-instance_method"><tt>@model.destroyable?</tt></a></tt>

</li>
</ul>
<p>
These are just methods (that default to always returning true), so
customizing the rules is as easy as overriding the methods:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Note constant id'>Note</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='creatable_by? fid id'>creatable_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
      <span class='user identifier id'>user</span> <span class='and and kw'>and</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='administrator? fid id'>administrator?</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
If you call
<tt><a title="<tt>records_creating_user</tt>" href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#records_creating_user-instance_method"><tt>records_creating_user</tt></a></tt> in your model, then the user from the
Authlogic UserSession is automatically stored whenever a record is created.
<tt><a title="Learn more." href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#records_creating_user-instance_method">Learn more.</a></tt>
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Note constant id'>Note</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='records_creating_user identifier id'>records_creating_user</span>

    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='creatable_by? fid id'>creatable_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
      <span class='user identifier id'>user</span> <span class='and and kw'>and</span> <span class='created_by? fid id'>created_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
MasterMayI also includes the
<tt><a title="<tt>protects_restful_actions</tt>" href="MasterMayI/ControllerExtensions.html#protects_restful_actions-instance_method"><tt>protects_restful_actions</tt></a></tt> controller class method, which
integrates with InheritedResources in order to automatically check with the
model in a set of before filters.
<tt><a title="Learn more." href="MasterMayI/ControllerExtensions.html#protects_restful_actions-instance_method">Learn more.</a></tt>
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='NotesController constant id'>NotesController</span> <span class='lt op'>&lt;</span> <span class='InheritedResources constant id'>InheritedResources</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='protects_restful_actions identifier id'>protects_restful_actions</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Finally, MasterMayI adds a few utility methods to your
ApplicationController:
</p>
<ul>
<li><tt><a title="<tt>current_user</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#current_user-instance_method"><tt>current_user</tt></a></tt>

</li>
<li><tt><a title="<tt>logged_in?</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#logged_in%3F-instance_method"><tt>logged_in?</tt></a></tt>

</li>
<li><tt><a title="<tt>require_user</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#require_user-instance_method"><tt>require_user</tt></a></tt>

</li>
<li><tt><a title="<tt>deny_access</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#deny_access-instance_method"><tt>deny_access</tt></a></tt>

</li>
<li><tt><a title="<tt>store_location</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#store_location-instance_method"><tt>store_location</tt></a></tt>

</li>
<li><tt><a title="<tt>redirect_back_or url</tt>" href="MasterMayI/ControllerExtensions/InstanceMethods.html#redirect_back_or-instance_method"><tt>redirect_back_or url</tt></a></tt>

</li>
</ul>
<p>
<tt><a title="Learn more." href="MasterMayI/ControllerExtensions/InstanceMethods.html">Learn more.</a></tt>
</p>
<h2>Model Level Authorization</h2>
<h2>Inherited Resources Support</h2>
<h4>Before Filters</h4>
<h4>Redirects messages</h4>
<h4>Flash messages</h4>
<h2>Copyright</h2>
<p>
Copyright &#169; 2009 Tammer Saleh. See LICENSE for details.
</p>
</div></div>
    
    <div id="footer">
  Generated on Thu Dec  3 18:24:38 2009 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.4.0 (ruby-1.8.6).
</div>

  </body>
</html>