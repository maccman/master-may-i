<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>"Master May I?"</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

      <div id="search">
  <a id="class_list_link" href="#">Namespace List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Master May I?</h1>
<p>
Clean, simple and flexible model based authorization designed to work with
AuthLogic and InheritedResources.
</p>
<h2>Executive Summary</h2>
<p>
<tt><a href="MasterMayI.html" title="Master May I">Master May I</a></tt> adds query methods to all your models, which can
be used to determine who&#8217;s allowed to do what.
</p>
<ul>
<li><tt><a href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#creatable_by%3F-instance_method" title="<tt>Model.creatable_by?(user)</tt>"><tt>Model.creatable_by?(user)</tt></a></tt> and
<tt><a href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#creatable%3F-instance_method" title="<tt>Model.creatable?</tt>"><tt>Model.creatable?</tt></a></tt>

</li>
<li><tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#readable_by%3F-instance_method" title="<tt>@model.readable_by?(user)</tt>"><tt>@model.readable_by?(user)</tt></a></tt> and
<tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#readable%3F-instance_method" title="<tt>@model.readable?</tt>"><tt>@model.readable?</tt></a></tt>

</li>
<li><tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#editable_by%3F-instance_method" title="<tt>@model.editable_by?(user)</tt>"><tt>@model.editable_by?(user)</tt></a></tt> and
<tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#editable%3F-instance_method" title="<tt>@model.editable?</tt>"><tt>@model.editable?</tt></a></tt>

</li>
<li><tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#destroyable_by%3F-instance_method" title="<tt>@model.destroyable_by?(user)</tt>"><tt>@model.destroyable_by?(user)</tt></a></tt> and
<tt><a href="MasterMayI/ActiveRecordExtensions/InstanceMethods.html#destroyable%3F-instance_method" title="<tt>@model.destroyable?</tt>"><tt>@model.destroyable?</tt></a></tt>

</li>
</ul>
<p>
These are just methods (that default to always returning true), so
customizing the rules is as easy as overriding the methods:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Note constant id'>Note</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='creatable_by? fid id'>creatable_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
      <span class='user identifier id'>user</span> <span class='and and kw'>and</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='administrator? fid id'>administrator?</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
If you call
<tt><a href="MasterMayI/ActiveRecordExtensions/ClassMethods.html#records_creating_user-instance_method" title="<tt>records_creating_user</tt>"><tt>records_creating_user</tt></a></tt> in your model, then the user from the
Authlogic UserSession is automatically stored whenever a record is created.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Note constant id'>Note</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='records_creating_user identifier id'>records_creating_user</span>

    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='creatable_by? fid id'>creatable_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
      <span class='user identifier id'>user</span> <span class='and and kw'>and</span> <span class='created_by? fid id'>created_by?</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
MasterMayI also includes the
<tt><a href="MasterMayI/InheritedResourcesExtensions.html#protects_restful_actions-instance_method" title="<tt>protects_restful_actions</tt>"><tt>protects_restful_actions</tt></a></tt> controller class method, which
integrates with InheritedResources in order to automatically check with the
model in a set of before filters.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='NotesController constant id'>NotesController</span> <span class='lt op'>&lt;</span> <span class='InheritedResources constant id'>InheritedResources</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='protects_restful_actions identifier id'>protects_restful_actions</span>
  <span class='end end kw'>end</span>
</pre>
<h2>Model Level Authorization</h2>
<h2>Inherited Resources Support</h2>
<h3>Customization</h3>
<h4>Before Filters</h4>
<h4>Redirects messages</h4>
<h4>Flash messages</h4>
<h2>Note on Patches/Pull Requests</h2>
<ul>
<li>Fork the project.

</li>
<li>Make your feature addition or bug fix.

</li>
<li>Add tests for it. This is important so I don&#8217;t break it in a future
version unintentionally.

</li>
<li>Commit, do not mess with rakefile, version, or history. (if you want to
have your own version, that is fine but bump version in a commit by itself
I can ignore when I pull)

</li>
<li>Send me a pull request. Bonus points for topic branches.

</li>
</ul>
<h2>Copyright</h2>
<p>
Copyright &#169; 2009 Tammer Saleh. See LICENSE for details.
</p>
</div></div>
    
    <div id="footer">
  Generated on Thu Dec  3 16:33:52 2009 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.4.0 (ruby-1.8.6).
</div>

  </body>
</html>